<!DOCTYPE html><html><head><meta charset=utf-8><title>AutoTrace Demo</title><style>@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap);*{margin:0;padding:0;box-sizing:border-box}body{font-family:Roboto,sans-serif;background-image:url(imgs/bg.jpg);background-position:center;background-size:cover}#root{width:100vw;height:100vh}.top{height:10%;width:100%;display:table}.top .title{display:table-cell;vertical-align:middle;text-align:center;font-size:50px;width:100%;border-bottom-style:solid;border-width:1px}.main{height:90%;display:flex;flex-direction:row;justify-content:center;align-items:center}.disclaimer{height:10%;padding:10px;text-align:center;display:flex;justify-content:center;align-items:center}.left,.right{height:80%;width:45%;margin:0 1rem;border-style:solid;border-width:1px;padding:20px;display:flex;justify-content:center;align-items:center;cursor:pointer}.left img.folder{max-height:50%;max-width:50%}.left img.pic,.right svg{max-height:100%;max-width:100%}.footer{height:5%;text-align:center;display:flex;align-items:center;justify-content:center}.footer select{font-size:1.5rem;height:70%;width:20%}.footer .d-all{display:inline-block;margin-left:1rem;padding:0 1.5rem;background-color:#61a0a0;cursor:pointer}.footer .d-all.deactivate{cursor:not-allowed;background-color:#707676}</style></head><body><div id=root><div class=top><div class=title>AutoTrace.js Demo</div></div><div style=height:85%><div class=disclaimer><img src=./imgs/info.svg style=max-height:50%;max-width:50%;margin-right:15px><div>This site uses AutoTraceJS, a browser port from <a href=http://autotrace.sourceforge.net/ target=_blank rel="noreferrer noopener nofollow">This Website</a>, which was written in C language.</div></div><div class=main><div class=left id=input-foler><img src=./imgs/folder.svg class=folder title="Select A Folder"></div><div class=right id=svg-area><span>The converted SVG goes here</span></div></div></div><div class=footer><select id=select-img></select><div id=d-all class="d-all deactivate">DownloadAll</div></div></div><script src=./d3.v4.min.js></script><script src=./autotrace.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jszip/3.9.1/jszip.min.js></script><script>var convert=null,loadFromDirectory=function(e){function o(e){var o=[{name:"Select Image"}].concat(e),e=d3.select("#select-img");e.selectAll("option").data(o).enter().append("option").attr("value",function(e,t){return t}).text(function(e){return e.name}).filter(function(e,t){return 0==t}).attr("selected",""),e.on("change",function(){if(0!=this.value){if(null===o[this.value].autotrace)return console.error("AutoTrace parse error");e=o[this.value],d3.select("#svg-area").selectAll("*").remove(),d3.select("#input-foler").selectAll("*").remove(),null!==e&&(t=e.autotrace,n=URL.createObjectURL(e.blob),r=function(e,t){var n=d3.create("a").attr("href",URL.createObjectURL(e)).attr("download",t).node();n.click(),window.setTimeout(function(){URL.revokeObjectURL(n.href)},50)},d3.select("#svg-area").append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:svg","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("viewBox","0 0 "+t.size.width+" "+t.size.height).on("click",function(){return r(new Blob([this.outerHTML],{type:"text/plain"}),e.name+".svg")}).append("path").attr("d",t.pathD),d3.select("#input-foler").append("img").attr("src",n).on("click",function(){return r(e.blob,e.name+"."+e.extension)}))}var e,t,n,r}),d3.select("#d-all").classed("deactivate",!1).on("click",function(){var e=new JSZip,n=e.folder("bitmap_image"),r=e.folder("svg_image");o.forEach(function(e,t){0!=t&&(n.file(e.blob.name,e.blob),r.file(e.name+".svg",new Blob([e.autotrace.svg],{type:"image/svg+xml"})))}),e.generateAsync({type:"blob"}).then(function(e){var t=d3.create("a").attr("href",URL.createObjectURL(e)).attr("download","output.zip").node();t.click(),setTimeout(function(){URL.revokeObjectURL(t.href)},50)})})}!function e(t,n){if(n==t.length)return function t(n,r){return r==n.length?(d3.select("#input-foler").html("").on("click",null).append("span").text("Your Original Picture Goes Here"),o(n)):(console.log("Converting: "+n[r].name+"..."),void convert(n[r].buffer,n[r].extension,"svg",function(e){return"success"==e.status?(e=e.val,n[r].autotrace={svg:e.svgText(),pathD:e.path(),size:{width:e.size()[0],height:e.size()[1]}}):n[r].autotrace=null,t(n,r+1)}))}(t,0);var r=new FileReader;r.onload=function(){return t[n].buffer=r.result,e(t,n+1)},r.readAsArrayBuffer(t[n].blob)}(e.map(function(e){return{name:e.name.split(".").slice(0,-1).join("."),extension:e.name.split(".").slice(-1)[0],blob:e}}),0)};d3.select(window).on("load",function(){autotrace.mkWorker(function(){autotrace.getAPI(function(e){convert=e.convert,d3.select("#input-foler").on("click",function(){d3.create("input").attr("type","file").attr("webkitdirectory","").attr("nultiple","").property("value",null).on("change",function(){var e=Array.from(this.files);loadFromDirectory(e.filter(function(e){return-1!=["image/bmp","image/png","image/jpeg"].indexOf(e.type)})),d3.select(this).on("change",null)}).node().click()})})})}),console.log("%c June, 2022 Steve_Chung","background: #222; color: #bada55")</script></body></html>